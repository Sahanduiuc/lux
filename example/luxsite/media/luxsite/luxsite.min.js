define(["lux/config"],function(a){"use strict";var b=a.PATH_TO_LOCAL_REQUIRED_FILES||"";return a.require.paths=a.extend(a.require.paths,{giotto:b+"luxsite/giotto","angular-img-crop":b+"luxsite/ng-img-crop.js","angular-infinite-scroll":"//cdnjs.cloudflare.com/ajax/libs/ngInfiniteScroll/1.2.1/ng-infinite-scroll",videojs:"//vjs.zencdn.net/4.12/video.js","moment-timezone":"//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.4.0/moment-timezone-with-data-2010-2020"}),a.require.shim=a.extend(a.require.shim,{"angular-moment":{deps:["angular","moment-timezone"]}}),a.config(),a}),define("lux/config/lux",[],function(){"use strict";function a(a,b){if(a||(a={}),b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(a){return"[object String]"===i.call(a)}function c(a){return"[object Array]"===i.call(a)}function d(a){return"[object Object]"===i.call(a)}function e(a){var b=a.replace("-","+").replace("_","/");switch(b.length%4){case 0:break;case 2:b+="==";break;case 3:b+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(b)))}function f(a){var b=e(a);if(!b)throw new Error("Cannot decode the token");return JSON.parse(b)}var g=window,h=g.lux||{},i=Object.prototype.toString;return b(h)&&(h={context:f(h)}),g.lux=h,h.root=g,h.messages=a(h.messages),h.require=a(h.require),h.extend=a,h.isString=b,h.isArray=c,h.isObject=d,h.urlBase64Decode=e,h.urlBase64DecodeToJSON=f,h}),define("lux/config/paths",[],function(){return function(){return{angular:"//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular","angular-animate":"//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-animate","angular-mocks":"//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-mocks.js","angular-sanitize":"//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-sanitize","angular-touch":"//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-touch","angular-strap":"//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.2.1/angular-strap","angular-strap-tpl":"//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.2.4/angular-strap.tpl","angular-ui-router":"//cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.14/angular-ui-router","angular-ui-select":"//cdnjs.cloudflare.com/ajax/libs/angular-ui-select/0.12.0/select","angular-cookies":"//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.4/angular-cookies","angular-ui-grid":"//cdnjs.cloudflare.com/ajax/libs/angular-ui-grid/3.0.7/ui-grid","angular-scroll":"//cdnjs.cloudflare.com/ajax/libs/angular-scroll/0.7.2/angular-scroll","angular-file-upload":"//cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/10.0.2/ng-file-upload","angular-moment":"//cdnjs.cloudflare.com/ajax/libs/angular-moment/0.10.1/angular-moment","angular-pusher":"//cdn.jsdelivr.net/angular.pusher/latest/pusher-angular.min.js",videojs:"//vjs.zencdn.net/4.12/video.js",async:"//cdnjs.cloudflare.com/ajax/libs/requirejs-async/0.1.1/async.js",pusher:"//js.pusher.com/2.2/pusher",codemirror:"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/codemirror","codemirror-markdown":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/markdown/markdown","codemirror-javascript":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/javascript/javascript","codemirror-python":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/python/python.js","codemirror-xml":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/xml/xml","codemirror-css":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/css/css","codemirror-htmlmixed":"//cdnjs.cloudflare.com/ajax/libs/codemirror/3.21.0/mode/htmlmixed/htmlmixed",crossfilter:"//cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.11/crossfilter",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3","google-analytics":"//www.google-analytics.com/analytics.js",gridster:"//cdnjs.cloudflare.com/ajax/libs/jquery.gridster/0.5.6/jquery.gridster",holder:"//cdnjs.cloudflare.com/ajax/libs/holder/2.3.1/holder",highlight:"//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js",katex:"//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min.js",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js",lodash:"//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash",marked:"//cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked",mathjax:"//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML",moment:"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment",restangular:"//cdnjs.cloudflare.com/ajax/libs/restangular/1.4.0/restangular",sockjs:"//cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.0.3/sockjs",stats:"//cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats",topojson:"//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson"}}}),define("lux/config/shim",[],function(){return function(a){return{angular:{exports:"angular"},"angular-strap-tpl":{deps:["angular","angular-strap"]},"angular-ui-select":{deps:["angular"]},"google-analytics":{exports:a.GoogleAnalyticsObject||"ga"},highlight:{exports:"hljs"},lux:{deps:["angular","lodash","angular-file-upload"]},"ui-bootstrap":{deps:["angular"]},codemirror:{exports:"CodeMirror"},"codemirror-markdown":{deps:["codemirror"]},"codemirror-xml":{deps:["codemirror"]},"codemirror-javascript":{deps:["codemirror"]},"codemirror-python":{deps:["codemirror"]},"codemirror-css":{deps:["codemirror"]},"codemirror-htmlmixed":{deps:["codemirror","codemirror-xml","codemirror-javascript","codemirror-css"]},restangular:{deps:["angular"]},crossfilter:{exports:"crossfilter"},trianglify:{deps:["d3"],exports:"Trianglify"},mathjax:{exports:"MathJax"}}}}),define("lux/config",["lux/config/lux","lux/config/paths","lux/config/shim"],function(a,b,c){function d(c){var d={},e=f()?".min":"",j=g.local_require_prefix,k=a.extend(b(),c.paths);for(var l in k)if(k.hasOwnProperty(l)){var m=k[l];if(j&&m.substring(0,j.length)===j&&(m=m.substring(j.length)),c.shim[l]||("angular-"===l.substring(0,8)?c.shim[l]={deps:["angular"]}:"d3-"===l.substring(0,3)&&(c.shim[l]={deps:["d3"]})),"string"!=typeof m)m=m.url;else{var n=m.split("?");2===n.length?(m=n[0],n=n[1]):n="",m.substring(m.length-3)!==i&&(m+=e),n&&(m.substring(m.length-3)!==i&&(m+=i),m+="?"+n),"//"===m.substring(0,2)&&h&&(m=h+m),m.substring(m.length-3)===i&&(m=m.substring(0,m.length-3))}d[l]=m}return d}function e(){return a.context?a.context.MEDIA_URL:void 0}function f(){return a.context?a.context.MINIFIED_MEDIA:void 0}var g=a.root,h=g.location&&"file:"===g.location.protocol?"http:":"",i=".js";return a.config=function(b){if(b=a.extend(b,a.require),!b.baseUrl){var f=e();void 0!==f&&(b.baseUrl=f)}b.shim=a.extend(c(g),b.shim),b.paths=d(b),require.config(b)},a}),define("require.config",["lux/config"],function(a){"use strict";var b=a.PATH_TO_LOCAL_REQUIRED_FILES||"";return a.require.paths=a.extend(a.require.paths,{giotto:b+"luxsite/giotto","angular-img-crop":b+"luxsite/ng-img-crop.js","angular-infinite-scroll":"//cdnjs.cloudflare.com/ajax/libs/ngInfiniteScroll/1.2.1/ng-infinite-scroll",videojs:"//vjs.zencdn.net/4.12/video.js","moment-timezone":"//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.4.0/moment-timezone-with-data-2010-2020"}),a.require.shim=a.extend(a.require.shim,{"angular-moment":{deps:["angular","moment-timezone"]}}),a.config(),a}),define("lux/utils",["angular","lux/config"],function(a,b){"use strict";function c(a,b){for(var c=b.split("."),d=0;d<c.length&&(a=a[c[d]],a);++d);return"function"==typeof a&&(a=a()),a}var d=a.element,e=b.root,f=a.forEach,g=Array.prototype.slice,h=function(){var a=[],b=function(){var b=this,c=g.call(arguments,0);a.forEach(function(a){a.apply(b,c)})};return b.add=function(b){a.push(b)},b};b.addEvent=function(a,b,c){var d=a[b];d||(a[b]=d=h()),d.add&&d.add(c)},b.windowResize=function(a){addEvent(window,"onresize",a)},b.windowHeight=function(){return window.innerHeight>0?window.innerHeight:screen.availHeight},b.isAbsolute=new RegExp("^([a-z]+://|//)"),b.isTag=function(a,b){return a=d(a),1===a.length&&a[0].tagName===b.toUpperCase()},b.joinUrl=function(){for(var a,b="",c=0;c<arguments.length;++c)if(a=arguments[c]){for(var d=a,e=!1;b&&"/"===d.substring(0,1);)d=d.substring(1);for(;"/"===d.substring(d.length-1);)e=!0,d=d.substring(0,d.length-1);d&&(b&&"/"!==b.substring(b.length-1)&&(b+="/"),b+=d,e&&(b+="/"))}return b},b.getOptions=function(a){var d;return a&&"string"==typeof a.options?(d=c(e,a.options),"function"==typeof d&&(d=d())):d={},b.isObject(d)&&f(a,function(a,b){"$"!==b.substring(0,1)&&"options"!==b&&(d[b]=a)}),d},b.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},b.extendArray=function(){if(arguments.length){var a=arguments[0],b=function(b){a.push(b)};if("function"==typeof a.push)for(var c=1;c<arguments.length;++c)f(arguments[c],b);return a}},b.querySelector=function(a,b){return a=d(a),a.length&&b?d(a[0].querySelector(b)):a};var i={};return b.loadCss=function(a){if(!i[a]){i[a]=!0;var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a),document.getElementsByTagName("head")[0].appendChild(b)}},b.globalEval=function(a){a&&(e.execScript||function(a){e.eval.call(e,a)})(a)},b.slugify=function(a){a=a.replace(/^\s+|\s+$/g,""),a=a.toLowerCase();for(var b="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",c="aaaaeeeeiiiioooouuuunc------",d=0,e=b.length;e>d;d++)a=a.replace(new RegExp(b.charAt(d),"g"),c.charAt(d));return a=a.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")},b.now=function(){return Date.now?Date.now():(new Date).getTime()},b.size=function(a){if(!a)return 0;if(void 0!==a.length)return a.length;var b=0;return f(a,function(){++b}),b},b.getObject=function(a,b,d){var g,h=a[b],i=[b,"class","style"];return h&&(d&&(g=c(d,h)),g||(g=c(e,h))),g||(g={}),f(a,function(a,b){"$"!==b.substring(0,1)&&-1===i.indexOf(b)&&(g[b]=a)}),g},b.formatString=function(a,b){return a.replace(/{(\w+)}/g,function(a,c){return b.hasOwnProperty(c)?b[c]:""})},b.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},b.getJsonOrNone=function(a){try{return JSON.parse(a)}catch(b){return null}},b.isJsonStringify=function(a){return b.isObject(a)||b.isArray(a)||b.isString(a)?!0:!1},b}),define("lux/services/api",["angular","lux/config"],function(a,b){"use strict";function c(a){return a.success=function(a){return c(this.then(function(b){var c=a(b.data,b.status,b.headers);return void 0===c?b:c}))},a.error=function(a){return c(this.then(null,function(b){var c=a(b.data,b.status,b.headers);return void 0===c?b:c}))},a}var d=a.element,e=a.extend;b.messages.no_api=function(a){return{text:'Api client for "'+a+'" is not available',icon:"fa fa-exclamation-triangle"}},a.module("lux.services",[]).value("ApiTypes",{}).value("AuthApis",{}).run(["$lux",function(a){var b=d(document.querySelector("meta[name=csrf-param]")).attr("content"),c=d(document.querySelector("meta[name=csrf-token]")).attr("content");a.user_token=d(document.querySelector("meta[name=user-token]")).attr("content"),b&&c&&(a.csrf={},a.csrf[b]=c)}]).service("$lux",["$location","$window","$q","$http","$log","$timeout","ApiTypes","AuthApis","$templateCache","$compile",function(a,c,f,g,h,i,j,k,l,m){function n(a,b,c,d){var e=m(b)(c);a.append(e),d&&d(e)}var o=this;this.location=a,this.window=c,this.log=h,this.http=g,this.q=f,this.timeout=i,this.apiUrls={},this.$log=h,this.messages=e({},b.messageService,{pushMessage:function(a){this.log(h,a)}}),this.api=function(a,c){if(1===arguments.length){var d;if(isObject(a)&&(d=a,a=a.url),c=j[a])return c(a,this).defaults(d);o.messages.error(b.messages.no_api(a))}else if(2===arguments.length)return j[a]=c,c(a,this)},this.authApi=function(a,b){return 1===arguments.length?k[a.baseUrl()]:void(2===arguments.length&&(k[a.baseUrl()]=b))},this.formData=function(a){return function(b){if(b=e(b||{},o.csrf),"application/x-www-form-urlencoded"===a)return d.param(b);if("multipart/form-data"===a){var c=new FormData;return forEach(b,function(a,b){c.append(b,a)}),c}return JSON.stringify(b)}},this.renderTemplate=function(a,b,c,d){var e=l.get(a);e?n(b,e,c,d):g.get(a).then(function(f){e=f.data,l.put(a,e),n(b,e,c,d)},function(b){o.messages.error("Could not load template from "+a)})}}]);var f=["delete","get","head","options"];return b.apiFactory=function(b,d){var g={},h={};return g.toString=function(){return h.name?joinUrl(g.baseUrl(),h.name):g.baseUrl()},g.defaults=function(a){return arguments.length?(a&&(h=a),g):h},g.formReady=function(a,b){$ux.log.error("Cannot handle form ready")},g.baseUrl=function(){return b},g.get=function(a,b){return g.request("get",a,b)},g.post=function(a,b){return g.request("post",a,b)},g.put=function(a,b){return g.request("put",a,b)},g.head=function(a,b){return g.request("head",a,b)},g["delete"]=function(a,b){return g.request("delete",a,b)},g.httpOptions=function(a){},g.authentication=function(a){},g.user=function(){},g.request=function(a,b,h){var i=e({},g.defaults());i.method=a.toLowerCase(),-1===f.indexOf(i.method)?i.data=h:(isObject(i.params)||(i.params={}),e(i.params,h||{})),b=e(i,b);var j=d.q.defer(),k=e({name:b.name,deferred:j,on:c(j.promise),options:b,error:function(a){isString(a.data)&&(a.data={error:!0,message:h}),j.reject(a)},success:function(a){isString(a.data)&&(a.data={message:h}),!a.data||a.data.error?j.reject(a):j.resolve(a)}});return delete b.name,b.url===g.baseUrl()&&delete b.url,g.call(k),k.on},g.populateApiUrls=function(){return d.log.info("Fetching api info"),d.http.get(b).then(function(a){return d.apiUrls[b]=a.data,a.data})},g.getApiNames=function(){var c,e;return a.isObject(d.apiUrls[b])?(e=d.q.defer(),c=e.promise,e.resolve(d.apiUrls[b])):c=g.populateApiUrls(),c},g.getUrlForTarget=function(a){return g.getApiNames().then(function(b){var c=b[a.name];return a.path&&(c=joinUrl(c,a.path)),c})},g.call=function(a){if(!a.baseUrl&&a.name){var c=d.apiUrls[b];if(!c)return g.populateApiUrls(b).then(function(){g.call(a)},a.error);if(a.baseUrl=c[a.name],!a.baseUrl)return a.error("Could not find a valid url for "+a.name)}a.baseUrl||(a.baseUrl=g.baseUrl());var e=a.options;if(!e.url){var f=a.baseUrl;e.path&&(f=joinUrl(a.baseUrl,e.path)),e.url=f}g.httpOptions(a);var h=g.authentication(a);if(h)return h;var i=a.options;i.url?(d.log.info("Executing HTTP "+i.method+" request @ "+i.url),d.http(i).then(a.success,a.error)):a.error("Api url not available")},g},b.apiFactory}),define("lux/services/luxweb",["angular","lux/config","lux/services/api"],function(a,b,c){"use strict";a.module("lux.webapi",["lux.services"]).run(["$rootScope","$lux",function(a,b){a.API_URL&&b.api(a.API_URL,e).scopeApi(a)}]),b.decodeJWToken=function(a){var c=a.split(".");if(3!==c.length)throw new Error("JWT must have 3 parts");return b.urlBase64DecodeToJSON(c[1])};var d=["get","head","options"],e=function(a,e){var f=c(a,e),g=f.request,h="authorizations_url";return f.authName=function(a){return 1===arguments.length?(h=a,f):h},f.token=function(a){return e.user_token},f.logout=function(a){var c=e.authApi(f);return c?(a.$emit("pre-logout"),void c.post({name:c.authName(),path:b.context.LOGOUT_URL}).then(function(){a.$emit("after-logout"),b.context.POST_LOGOUT_URL?e.window.location.href=b.context.POST_LOGOUT_URL:e.window.location.reload()},function(a){e.messages.error("Error while logging out")})):void e.messages.error("Error while logging out")},f.user=function(){var a=f.token();if(a){var c=b.decodeJWToken(a);return c.token=a,c}},f.login=function(){b.context.LOGIN_URL&&(e.window.location.href=b.context.LOGIN_URL,e.window.reload())},f.formReady=function(a,b){var c=f.defaults().get;c&&f.get().success(function(c){forEach(c,function(c,d){var e=b[b.formModelName+"Type"],f=d.split("[]")[0];"json"===e[f]&&isJsonStringify(c)&&(isArray(c)&&(d=f),c=JSON.stringify(c,null,4)),isArray(c)?(a[d]=[],forEach(c,function(b){a[d].push(b.id||b)})):a[d]=c.id||c})})},f.request=function(a,b,c){var d=g.call(f,a,b,c);return d.error(function(a,c){401===c?f.login():c?404===c&&e.log.info("Endpoint not found"+(b.path?" @ "+b.path:"")):e.log.error("Server down, could not complete request")}),d},f.httpOptions=function(a){var b=a.options;e.csrf&&d.indexOf(-1===b.method)&&(b.data=extend(b.data||{},e.csrf)),b.headers||(b.headers={}),b.headers["Content-Type"]="application/json"},f.scopeApi=function(b,c){c&&(e.authApi(f,c),c.authName(null)),b.api=function(){return e.api(a)},b.getUser=function(){return f.user()},b.logout=function(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),f.user()&&f.logout(b)}},f};return e}),define("lux/services/luxrest",["angular","lux/config","lux/services/luxweb"],function(a,b,c){"use strict";a.module("lux.restApi",["lux.services"]).run(["$rootScope","$lux",function(a,b){if(a.API_URL){var e=b.api("",c);b.api(a.API_URL,d).scopeApi(a,e)}}]);var d=function(a,b){var d=c(a,b);return d.httpOptions=function(a){var b=a.options,c=b.headers;c||(b.headers=c={}),c["Content-Type"]="application/json"},d.authentication=function(a){if("authorizations_url"===a.name&&a.options.url===a.baseUrl&&"post"===a.options.method)a.on.success(function(a,c){b.window.location.reload()});else{var c=d.token();if(c){var e=a.options.headers;e||(a.options.headers=e={}),e.Authorization="Bearer "+c}}},d};return d}),define("lux/services/ws",["angular","lux/config"],function(a,b){"use strict";function c(b,c,d,e){var f={},g=c[b];return g||(g={executed:{},id:0},c[b]=g),f.getUrl=function(){return b},f.rpc=function(a,b,c){b={method:a,id:++g.id,data:b};var d=JSON.stringify(b);return c&&(g.executed[b.id]=c),f.sendMessage(d)},f.connect=function(h){var i=g.sock;return a.isArray(i)?h&&i.push(h):i?h&&h(i):(i=[],g.sock=i,h&&i.push(h),require(["sockjs"],function(f){var h=new f(b);h.onopen=function(){var a=g.sock;g.sock=h,e.info("New web socket connection with "+b),a.forEach(function(a){a(h)})},h.onmessage=function(b){var c,f=a.fromJson(b.data);f.event&&e.info("event",f.event),f.channel&&(c=d[f.channel]),f.data&&(f.data=a.fromJson(f.data)),"rpc"===f.channel?"undefined"!=typeof f.data.id&&g.executed[f.data.id]&&(g.executed[f.data.id](f.data.data,h),f.data.rpcComplete&&delete g.executed[f.data.id]):a.forEach(c,function(a){a(h,f)})},h.onclose=function(){delete c[b],e.warn("Connection with "+b+" CLOSED")}})),f},f.sendMessage=function(a,b){return f.connect(function(c){("string"!=typeof a||b)&&(a=JSON.stringify(a)),c.send(a)})},f.disconnect=function(){var b=g.sock;return a.isArray(b)?b.push(function(a){a.close()}):b&&b.close(),f},f.addListener=function(a,b){var c=d[a];c||(c=[],d[a]=c),c.push(b)},f}a.module("lux.sockjs",[]).run(["$rootScope","$log",function(a,b){var d={},e={};a.sockJs=function(a){return c(a,d,e,b)}}])}),define("lux/services",["lux/services/luxweb","lux/services/luxrest","lux/services/ws"],function(){"use strict"}),define("lux",["angular","lux/utils","lux/services"],function(a,b){"use strict";var c=a.forEach,d=a.extend,e=!1,f=a.element,g={url:"",MEDIA_URL:"",hashPrefix:"",ngModules:[]};return b.version="0.1.0",b.forEach=a.forEach,b.context=d({},g,b.context),b.media=function(a,c){return c||(c=b.context),b.joinUrl(c.url,c.MEDIA_URL,a)},b.loader=a.module("lux.loader",[]).value("context",b.context).config(["$controllerProvider",function(a){b.loader.cp=a,b.loader.controller=a}]).run(["$rootScope","$log","$timeout","context",function(a,b,c,e){b.info("Extend root scope with context"),d(a,e),a.$timeout=c,a.$log=b}]),b.bootstrap=function(d,g){function h(){var e=b.context.ngModules;e||(e=[]),c(g,function(a){e.push(a)}),e.splice(0,0,"lux.loader"),a.module(d,e),a.bootstrap(document,[d])}e||(e=!0,f(document).ready(function(){h()}))},b}),define("lux/forms/utils",["angular","lux"],function(a,b){"use strict";a.module("lux.form.utils",["lux.pagination"]).constant("lazyLoadOffset",40).directive("remoteOptions",["$lux","luxPaginationFactory","lazyLoadOffset","$timeout",function(b,c,d,e){function f(b,c,f,g,h){function i(c){var e=h[0].querySelector(".ui-select-choices");if(c.stopPropagation(),e){var f=e.querySelector(".ui-select-choices-group");e=a.element(e),e.on("scroll",function(){var a=f.clientHeight-this.clientHeight-d;this.scrollTop>a&&(e.off(),b.loadMore())})}}function j(){u.data().onKeyUp||(u.data("onKeyUp",!0),u.on("keyup",function(a){var c=a.srcElement.value,d="id"===g.remoteOptionsId?p.source:g.remoteOptionsId;l(),c.length>3&&b.search(c,d)}))}function k(b){a.forEach(b.data.result,function(a){var c;c=q?formatString(p.source,a):a[p.source],t.push({id:a[o],name:c,searched:b.searched?!0:!1})}),m()}function l(){for(var a=0;a<t.length;a++)t[a].searched&&t.splice(a,1)}function m(){e(function(){return f.$select.selected}).then(function(a){for(var b=0;b<t.length;b++)for(var c=0;c<a.length;c++)t[b].id===a[c].id&&t.splice(b,1)})}function n(a){if(a.data&&a.data.error)throw t.splice(0,1,{id:"placeholder",name:"Unable to load data..."}),new Error(a.data.message);k(a)}var o=g.remoteOptionsId||"id",p=g.remoteOptionsValue?JSON.parse(g.remoteOptionsValue):{type:"field",source:"id"},q="formatString"===p.type,r={},s=JSON.parse(g.remoteOptionsParams||"{}"),t=[],u=a.element(h[0].querySelector("input[type=text]"));f[c.name]=t,r.id="",r.name="Loading...",t.push(r),void 0===f[f.formModelName][g.name]&&(f[f.formModelName][g.name]=""),g.multiple?(s.limit=200,s.sortby=p.source?p.source+":asc":"id:asc",t.splice(0,1)):(s.sortby=s.sortby?s.sortby+":asc":"id:asc",t[0]={name:"Please select...",id:"placeholder"}),b.getData(s,n),f.$on("moreData",function(a){i(a),j()})}function g(a,b,d){if(d.remoteOptions){var e=JSON.parse(d.remoteOptions),g=new c(a,e,d.multiple?!0:!1);if(g&&e.name)return f(g,e,a,d,b)}}return{link:g}}]).directive("selectOnClick",function(){return{restrict:"A",link:function(a,b,c){b.on("click",function(){window.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}})}),define("lux/forms/handlers",["angular","lux"],function(a,b){"use strict";a.module("lux.form.handlers",["lux.services"]).run(["$lux",function(a){var c={};a.formHandlers=c,c.reload=function(){a.window.location.reload()},c.redirectHome=function(b,c){var d=c.formAttrs.redirectTo||"/";a.window.location.href=d},c.login=function(c,d){var e=d.formAttrs.action,f=a.api(e);f&&f.token(c.data.token),a.window.location.href=b.context.POST_LOGIN_URL||b.context.LOGIN_URL},c.passwordRecovery=function(b,c){var d=b.data.email;if(d){var e="We have sent an email to <strong>"+d+"</strong>. Please follow the instructions to change your password.";a.messages.success(e)}else a.messages.error("Could not find that email")},c.signUp=function(b,c){var d=b.data.email;if(d){var e="We have sent an email to <strong>"+d+"</strong>. Please follow the instructions to confirm your email.";a.messages.success(e)}else a.messages.error("Something wrong, please contact the administrator")},c.passwordChanged=function(c,d){if(c.data.success){var e='Password succesfully changed. You can now <a title="login" href="'+b.context.LOGIN_URL+'">login</a> again.';a.messages.success(e)}else a.messages.error("Could not change password")},c.enquiry=function(b,c){if(b.data.success){var d="Thank you for your feedback!";a.messages.success(d)}else a.messages.error("Feedback form error")}}])}),define("lux/forms/process",["angular","lux","lux/forms/handlers"],function(a,b){"use strict";a.module("lux.form.process",["ngFileUpload"]).run(["$lux","Upload",function(a,c){b.processForm=function(a){a.preventDefault(),a.stopPropagation();var b,d,e,f,g=this,h=g.$lux,i=this[this.formName],j=this[this.formModelName],k=this.formAttrs,l=k.action,m=(g.formAttrs.FORMKEY,k.method||"post"),n={};if(i.submitted=!0,!i.$invalid){if(isObject(l)&&(d=h.api(l)),this.formMessages={},"ngFileUpload"===g.formProcessor)d?b=d.getUrlForTarget(l).then(function(a){e=a,n.Authorization="bearer "+d.token()}):(f=h.q.defer(),e=l,f.resolve(),b=f.promise),b=b.then(function(){return c.upload({url:e,headers:n,data:j})});else if(d)b=d.request(m,l,j);else{if(!l)return void h.log.error("Could not process form. No target or api");var o=k.enctype||"application/json",p=o.split(";")[0],q={url:l,method:k.method||"POST",data:j,transformRequest:h.formData(p)};"application/x-www-form-urlencoded"===p||"multipart/form-data"===p?q.headers={"content-type":void 0}:q.headers={"content-type":p},b=h.http(q)}b.then(function(a){var b=a.data,c=g.formAttrs.resultHandler,e=c&&h.formHandlers[c];if(e)e(a,g);else if(b.messages)g.addMessages(b.messages);else if(d){var f=b.message;f||(f=201===a.status?"Successfully created":"Successfully updated"),h.messages.info(f)}},function(a){var b=a.data||{};if(b.errors)g.addMessages(b.errors,"error");else{var c=b.message;if(!c){var d=d||b.status||501;c="Response error ("+d+")"}h.messages.error(c)}})}}}])}),define("lux/forms",["angular","lux","lux/forms/utils","lux/forms/handlers","lux/forms/process"],function(a,b){"use strict";function c(a,b,c){return a+'["'+b+'"].'+c}var d=a.element,e=a.extend,f=a.forEach,g=b.getOptions,h=b.isString,i=b.isObject,j=b.isArray;return b.forms={directives:{}},a.module("lux.form",["lux.form.utils","lux.form.handlers","ngFileUpload","lux.form.process"]).constant("formDefaults",{layout:"default",labelSpan:2,showLabels:!0,novalidate:!0,dateTypes:["date","datetime","datetime-local"],defaultDatePlaceholder:"YYYY-MM-DD",formErrorClass:"form-error",FORMKEY:"m__form",useNgFileUpload:!0}).constant("defaultFormElements",function(){return{text:{element:"input",type:"text",editable:!0,textBased:!0},date:{element:"input",type:"date",editable:!0,textBased:!0},datetime:{element:"input",type:"datetime",editable:!0,textBased:!0},"datetime-local":{element:"input",type:"datetime-local",editable:!0,textBased:!0},email:{element:"input",type:"email",editable:!0,textBased:!0},month:{element:"input",type:"month",editable:!0,textBased:!0},number:{element:"input",type:"number",editable:!0,textBased:!0},password:{element:"input",type:"password",editable:!0,textBased:!0},search:{element:"input",type:"search",editable:!0,textBased:!0},tel:{element:"input",type:"tel",editable:!0,textBased:!0},textarea:{element:"textarea",editable:!0,textBased:!0},time:{element:"input",type:"time",editable:!0,textBased:!0},url:{element:"input",type:"url",editable:!0,textBased:!0},week:{element:"input",type:"week",editable:!0,textBased:!0},checkbox:{element:"input",type:"checkbox",editable:!0,textBased:!1},color:{element:"input",type:"color",editable:!0,textBased:!1},file:{element:"input",type:"file",editable:!0,textBased:!1},range:{element:"input",type:"range",editable:!0,textBased:!1},select:{element:"select",editable:!0,textBased:!1},checklist:{element:"div",editable:!1,textBased:!1},fieldset:{element:"fieldset",editable:!1,textBased:!1},div:{element:"div",editable:!1,textBased:!1},form:{element:"form",editable:!1,textBased:!1},radio:{element:"div",editable:!1,textBased:!1},button:{element:"button",type:"button",editable:!1,textBased:!1},hidden:{element:"input",type:"hidden",editable:!1,textBased:!1},image:{element:"input",type:"image",editable:!1,textBased:!1},legend:{element:"legend",editable:!1,textBased:!1},reset:{element:"button",type:"reset",editable:!1,textBased:!1},submit:{element:"button",type:"submit",editable:!1,textBased:!1}}}).factory("formElements",["defaultFormElements",function(a){return a}]).run(["$rootScope","$lux",function(a,b){a.$on("formReady",function(a,c,d){var e=d.formAttrs,f=e?e.action:null,g=e?e.actionType:null;if(i(f)&&"create"!==g){var h=b.api(f);h&&(b.log.info("Form "+d.formModelName+' registered with "'+h.toString()+'" api'),h.formReady(c,d))}})}]).service("standardForm",["$log","$http","$document","$templateCache","formDefaults","formElements",function(g,h,i,k,l,m){var n=["id","name","title","style"],o=extendArray([],n,["disabled","readonly","type","value","placeholder","autocapitalize","autocorrect"]),p=extendArray([],n,["disabled","readonly","placeholder","rows","cols"]),q=extendArray([],n,["disabled"]),r=extendArray([],n,["accept-charset","autocomplete","enctype","method","novalidate","target"]),s=["minlength","maxlength","min","max","required"],t=["disabled","minlength","maxlength","required"],u=m();e(this,{name:"default",className:"",inputGroupClass:"form-group",inputHiddenClass:"form-hidden",inputClass:"form-control",buttonClass:"btn btn-default",template:function(a){return h.get(a,{cache:k}).then(function(a){return a.data})},createElement:function(a,b){function c(a,c,d){var e=a+"Type",f=getJsonOrNone(c.text_edit);b[e]=b[e]||{},null!==f?b[e][c.name]=f.mode||"":b[e][c.name]=d}var d,h,i=b.field,k=i.type.split("."),m=u[k.splice(0,1)[0]];b.extraClasses=k.join(" "),b.info=m,m&&(h=m.hasOwnProperty("type")&&"function"==typeof this[m.type]?m.type:m.element),d=this[h],c(b.formModelName,i,h),d||(d=this.renderNotElements);var n=d.call(this,b);return f(b.children,function(c){var d=c.field;d?(f(l,function(a,c){void 0===d[c]&&(d[c]=b.field[c])}),void 0===c.children&&(c.children=null),c=a.createElement(e(b,c)),j(c)?f(c,function(a){n.append(a)}):c&&n.append(c)):g.error("form child without field")}),b.field=i,n},addAttrs:function(a,b,c){return f(a.field,function(a,d){c.indexOf(d)>-1?t.indexOf(d)>-1?b.attr("ng-"+d,a):b.attr(d,a):"data-"===d.substring(0,5)&&b.attr(d,a)}),b},addDirectives:function(a,b){return a.field.hasOwnProperty("text_edit")?b.attr("lux-codemirror",a.field.text_edit):l.dateTypes.indexOf(a.field.type)>-1?b.attr("format-date",""):a.formAttrs.useNgFileUpload&&"file"===a.field.type&&(b.attr("ngf-select",""),a.formProcessor="ngFileUpload"),b},renderNotForm:function(a){return d(i[0].createElement("span")).html(field.label||"")},fillDefaults:function(a){var b=a.field;b.label=b.label||b.name,a.formCount++,b.id||(b.id=b.name+"-"+a.formid+"-"+a.formCount)},form:function(a){var b=a.field,c=a.info,e=d(i[0].createElement(c.element)).attr("role","form").addClass(this.className).attr("ng-model",b.model);return this.formMessages(a,e),this.addAttrs(a,e,r)},"ng-form":function(a){return this.form(a)},fieldset:function(a){var b=a.field,c=a.info,e=d(i[0].createElement(c.element));return b.label&&e.append(d(i[0].createElement("legend")).html(b.label)),e},div:function(a){var b=a.info,c=d(i[0].createElement(b.element)).addClass(a.extraClasses);return c},radio:function(b){this.fillDefaults(b);var c=b.field,d=b.info,e=a.element(i[0].createElement(d.element)),g=a.element(i[0].createElement("label")).attr("for",c.id),h=a.element(i[0].createElement("span")).css("margin-left","5px").css("position","relative").css("bottom","2px").html(c.label),j=a.element(i[0].createElement("div")).addClass(this.element);return e.attr("ng-model",b.formModelName+'["'+c.name+'"]'),f(o,function(a){c[a]&&e.attr(a,c[a])}),g.append(e).append(h),j.append(g),this.onChange(b,this.inputError(b,j))},checkbox:function(a){return this.radio(a)},input:function(b,c){this.fillDefaults(b);var d,e=b.field,f=b.info,g=a.element(i[0].createElement(f.element)).addClass(this.inputClass),h=a.element(i[0].createElement("label")).attr("for",e.id).html(e.label);return g.attr("ng-model",b.formModelName+'["'+e.name+'"]'),"date"===e.type&&void 0===e.placeholder&&(e.placeholder=l.defaultDatePlaceholder),e.showLabels&&"hidden"!==e.type||(h.addClass("sr-only"),void 0===e.placeholder&&(e.placeholder=e.label)),this.addAttrs(b,g,c||o),void 0!==e.value&&(b[b.formModelName][e.name]=e.value,f.textBased&&g.attr("value",e.value)),g=this.addDirectives(b,g),this.inputGroupClass?(d=a.element(i[0].createElement("div")),"hidden"===e.type?d.addClass(this.inputHiddenClass):d.addClass(this.inputGroupClass),d.append(h).append(g)):d=[h,g],this.onChange(b,this.inputError(b,d))},textarea:function(a){return this.input(a,p)},select:function(a){var b,c=a.field,d={},e=[],g=[];f(c.options,function(a){"string"==typeof a?a={value:a}:j(a)&&(a={value:a[0],repr:a[1]||a[0]}),a.group?(b=d[a.group],b||(b={name:a.group,options:[]},d[a.group]=b,e.push(b)),b.options.push(a)):g.push(a),c.value||(c.value=a.value)});var h=(a.info,this.input(a));return u.select.hasOwnProperty("widget")&&"selectUI"===u.select.widget.name?this.selectUI(a,h,c,e,g):this.selectStandard(a,h,c,e,g),this.onChange(a,h)},selectStandard:function(a,b,c,e,g){var h,j=this._select(a.info.element,b);e.length?(g.length&&e.push({name:"other",options:g}),f(e,function(a){h=d(i[0].createElement("optgroup")).attr("label",a.name),
j.append(h),f(a.options,function(a){a=d(i[0].createElement("option")).attr("value",a.value).html(a.repr||a.value),h.append(a)})})):f(g,function(a){a=d(i[0].createElement("option")).attr("value",a.value).html(a.repr||a.value),j.append(a)}),c.multiple&&j.attr("multiple",!0)},selectUI:function(a,b,c,e,f){a.groupBy=function(a){return a.group},a.enableSearch=u.select.widget.enableSearch,c.hasOwnProperty("search")&&(a.enableSearch=c.search);var g=d(i[0].createElement("ui-select")).attr("id",c.id).attr("name",c.name).attr("ng-model",a.formModelName+'["'+c.name+'"]').attr("theme",u.select.widget.theme).attr("search-enabled","enableSearch").attr("ng-change",'fireFieldChange("'+c.name+'")'),h=d(i[0].createElement("ui-select-match")).attr("placeholder","Select or search "+c.label.toLowerCase()),j=d(i[0].createElement("div")),k=d(i[0].createElement("small")),l=d(i[0].createElement("ui-select-choices")).attr("ui-disable-choice",'item.id === "placeholder"').append(j);if(c.multiple&&g.attr("multiple",!0),c.hasOwnProperty("data-remote-options"))g.attr("data-remote-options",c["data-remote-options"]).attr("data-remote-options-id",c["data-remote-options-id"]).attr("data-remote-options-value",c["data-remote-options-value"]).attr("data-remote-options-params",c["data-remote-options-params"]),c.multiple?h.html("{{$item.repr || $item.name || $item.id}}"):h.html("{{$select.selected.name || $select.selected.id}}"),l.attr("repeat",c["data-ng-options-ui-select"]+" | filter: $select.search"),j.html("{{item.name || item.id}}");else{var m=c.name+"_opts",n="opt.value as opt in "+m+" | filter: $select.search";if(c.multiple?h.html("{{$item.value}}"):h.html("{{$select.selected.value}}"),e.length)a[m]=c.options,l.attr("group-by","groupBy").attr("repeat",n),j.attr("ng-bind-html","opt.repr || opt.value");else if(a[m]=f,l.attr("repeat",n),f.length>0){var o=Object.keys(f[0]).length;j.attr("ng-bind-html","opt.repr || opt.value"),o>1&&(k.attr("ng-bind-html","opt.value"),l.append(k))}}g.append(h),g.append(l),b[0].replaceChild(g[0],b[0].childNodes[1])},button:function(a){var b=a.field,c=a.info,e=d(i[0].createElement(c.element)).addClass(this.buttonClass);return b.name=b.name||c.element,b.label=b.label||b.name,e.html(b.label),this.addAttrs(a,e,q),this.onClick(a,e)},onClick:function(b,c){var d=c.attr("name"),e=b.field,f=d+"Click",h=this;return b[f]=function(c){if(!b.$broadcast(f,c).defaultPrevented&&!b.$emit(f,c).defaultPrevented){var d=h.processForm(b);return e.click&&(d=getRootAttribute(e.click),!a.isFunction(d))?void g.error('Could not locate click function "'+e.click+'" for button'):void d.call(this,c)}},c.attr("ng-click",f+"($event)"),c},onChange:function(a,b){var c=a.field,e=d(b[0].querySelector(a.info.element));return e.attr("ng-change",'fireFieldChange("'+c.name+'")'),b},inputError:function(a,b){var e,g,h=a.field,j=this,k=a.formName+".submitted",l=c(a.formName,h.name,"$dirty"),m=c(a.formName,h.name,"$invalid"),n=c(a.formName,h.name,"$error")+".",o=d(b[0].querySelector(a.info.element)),p=d(i[0].createElement("p")).attr("ng-show","("+k+" || "+l+") && "+m).addClass("text-danger error-block").addClass(a.formErrorClass);f(s,function(b){e=h[b],g=b,void 0!==e&&e!==!1&&null!==e&&(t.indexOf(b)>-1&&(g="ng-"+b),o.attr(g,e),p.append(d(i[0].createElement("span")).attr("ng-show",n+b).html(j.errorMessage(a,b))))});var q=p.children().length,r="$invalid";q&&(r+=" && !"+c(a.formName,h.name,"$error.required")),r+=" && !formErrors."+h.name,p.append(this.fieldErrorElement(a,r,j.errorMessage(a,"invalid")));var u="$invalid";return u+=" && !"+c(a.formName,h.name,"$error.required"),u+=" && formErrors."+h.name,p.append(this.fieldErrorElement(a,u,j.errorMessage(a,"invalid")).html('{{formErrors["'+h.name+'"]}}')),b.append(p)},fieldErrorElement:function(a,b,e){var f=a.field,g=c(a.formName,f.name,b);return d(i[0].createElement("span")).attr("ng-show",g).html(e)},formMessages:function(a,b){var c=d(i[0].createElement("p")),e=a.formAttrs;return c.attr("ng-repeat","message in formMessages."+e.FORMKEY).attr("ng-bind","message.message").attr("ng-class","message.error ? 'text-danger' : 'text-info'"),b.append(c)},errorMessage:function(a,b){var c=b+"Message",d=a.field,e=this[b+"ErrorMessage"]||this.defaultErrorMesage;return d[c]||e.call(this,a)},defaultErrorMesage:function(a){var b=a.field.type;return"Not a valid "+b},minErrorMessage:function(a){return"Must be greater than "+a.field.min},maxErrorMessage:function(a){return"Must be less than "+a.field.max},maxlengthErrorMessage:function(a){return"Too long, must be less than "+a.field.maxlength},minlengthErrorMessage:function(a){return"Too short, must be more than "+a.field.minlength},requiredErrorMessage:function(a){var b=a.field.required_error;return b||a.field.label+" is required"},processForm:function(a){return a.processForm||b.processForm},_select:function(a,b){if(!j(b))return d(b[0].querySelector(a));for(var c=0;c<b.length;++c)if(b[0].tagName===a)return b}})}]).service("horizontalForm",["$document","standardForm",function(a,b){e(this,b,{name:"horizontal",className:"form-horizontal",input:function(c){var e=b.input(c),f=e.children(),g=c.field.labelSpan?+c.field.labelSpan:2,h=d(a[0].createElement("div"));g=Math.max(2,Math.min(g,10)),d(f[0]).addClass("control-label col-sm-"+g),h.addClass("col-sm-"+(12-g));for(var i=1;i<f.length;++i)h.append(d(f[i]));return e.append(h)},button:function(c){var e=b.button(c),f=c.field.labelSpan?+c.field.labelSpan:2,g=d(a[0].createElement("div")).addClass(this.inputGroupClass),h=d(a[0].createElement("div"));return f=Math.max(2,Math.min(f,10)),h.addClass("col-sm-offset-"+f).addClass("col-sm-"+(12-f)),g.append(h.append(e)),g}})}]).service("inlineForm",["standardForm",function(a){e(this,a,{name:"inline",className:"form-inline",input:function(b){var c=a.input(b);return d(c[0].getElementsByTagName("label")).addClass("sr-only"),c}})}]).service("formBaseRenderer",["$lux","$compile","formDefaults",function(a,b,c){this.createElement=function(b){var c=b.field;return this[c.layout]?this[c.layout].createElement(this,b):void a.log.error('Layout "'+c.layout+'" not available, cannot render form')},this.initScope=function(b,d,i){var j=g(i);if(!j){var k=d[0].getElementsByTagName("script");f(k,function(a){globalEval(a.innerHTML)}),j=g(i)}if(j&&j.field){var l=j.field,m={};j.field=e({},c,l),e(b,j),l=b.field,l.model?(l.name||(l.name=l.model+"form"),b.$parent[l.model]=m):(l.name||(l.name="form"),l.model=l.name+"Model"),b.formName=l.name,b.formModelName=l.model,b[b.formModelName]=m,b.formAttrs=l,b.formClasses={},b.formErrors={},b.formMessages={},b.$lux=a,l.id||(l.id="f"+s4()),b.formid=l.id,b.formCount=0,b.addMessages=function(a,d){f(a,function(a){h(a)&&(a={message:a});var e=a.field;e&&!b[b.formName].hasOwnProperty(e)?(a.message=e+" "+a.message,e=c.FORMKEY):e||(e=c.FORMKEY),d&&(a.error=d),b.formMessages[e]=[a],a.error&&e!==c.FORMKEY&&(b.formErrors[e]=a.message,b[b.formName][e].$invalid=!0)})},b.fireFieldChange=function(a){void 0!==b.formErrors[a]&&delete b.formErrors[a],b.$broadcast("fieldChange",m,a),b.$emit("formFieldChange",m,a)}}else a.log.error("Form data does not contain field entry")},this.createForm=function(a,c){var d=a.field;if(d){var e=this.createElement(a);e&&(this.preCompile(a,e),b(e)(a),c.replaceWith(e),this.postCompile(a,e))}},this.preCompile=function(){},this.postCompile=function(){},this.checkField=function(a){var b=this["check_"+a];if(b)b.call(this);else{var c=this.form[a];c.$valid?this.formClasses[a]="has-success":c.$dirty&&(this.formErrors[a]=a+" is not valid",this.formClasses[a]="has-error")}},this.processForm=function(a){return a.formMessages=[],a.formErrors=[],a.form.$invalid?$scope.showErrors():void 0}}]).service("formRenderer",["formBaseRenderer","standardForm","horizontalForm","inlineForm",function(a,b,c,d){var f=e(this,a);this[b.name]=b,this[c.name]=c,this[d.name]=d,this.directive=function(){return{restrict:"AE",scope:{},compile:function(){return{pre:function(a,b,c){f.initScope(a,b,c)},post:function(a,b){f.createForm(a,b),a.$emit("formReady",a[a.formModelName],a)}}}}}}]).directive("luxForm",["formRenderer",function(a){return a.directive()}]).directive("checkRepeat",["$log",function(a){return{require:"ngModel",restrict:"A",link:function(b,c,d,e){var f=c.inheritedData("$formController")[d.checkRepeat];f?(e.$parsers.push(function(a){return a===f.$viewValue?(e.$setValidity("repeat",!0),a):void e.$setValidity("repeat",!1)}),f.$parsers.push(function(a){return e.$setValidity("repeat",a===e.$viewValue),a})):a.error("Check repeat directive could not find "+d.checkRepeat)}}}]).directive("watchChange",function(){return{scope:{onchange:"&watchChange"},link:function(a,b,c){b.on("keyup",function(){a.$apply(function(){a.onchange()})}).on("change",function(){a.$apply(function(){a.onchange()})})}}}).directive("formatDate",function(){return{require:"?ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){return"string"==typeof a||"number"==typeof a?new Date(a):a})}}}),b.forms}),require(["require.config","angular","giotto","lux/forms"],function(a,b,c){a.bootstrap("luxsite",[])}),define("app",function(){});